# 웹 성능 이란?
1. 웹
    - 인터넷에 연결된 컴퓨터를 통해 수많은 정보의 공유가 가능한 인터넷의 대표적 서비스 / 사용자&서비스 면에서 절대적인 비율 차지
    - 인터넷을 이용한 서비스 ex) 이메일, 메신저, 텔넷, FTP ...
    1. 웹의 역사
        - 이전에도 TCP/IP, UDP 이용한 클라이언트-서버간 데이터 교환 가능
        - 브라우저를 일종의 DB로 이용해 필요한 정보 조회, 전달할 수 있는 방법 고안
        - !브라우저: 웹 사이트라는 페이지 기반으로 문자와 다양한 정보를 문서읽듯 제공 및 이를 읽을 수 있는 전용 프로그램
        - 웹: 하이퍼텍스트 바탕으로 관련있는 문서끼리 연결한 문서의 집합체
        - 하이퍼텍스트가 출현함으로써 연관있는 페이지를 하이퍼링크 통해 연결하는 기능 등을 이용할 수 있게됨
        - !하이퍼텍스트: 텍스트를 뛰어넘는 다양한 콘텐츠 아우르는 형식
    2. 웹의 대표적인 요소
        - 1) URL: 웹 자원이 인터넷상 위치하는 곳 알림
            - 구성: 프로토콜 + 도메인영역(서브도메인 + 톱레벨도메인) + 디렉터리 + 최종경로
            - ex) ```https://cdn.webfrontend.org/wp-content/uploads/2020/06/book2.png```
            - !프로토콜: 클라이언트-서버가 데이터 주고받는 방식 결정_https
            - !도메인영역: 해당 서비스의 이름 대표_cdn.webfontend.org
            - !디렉터리: 해당 자원이 위치하는 장소를 구조적으로 나눈 위치_/wp-content/uploads/2020/06
            - !최종경로: 실제자원이 존재하는 자원의 경로로 파일확장자를 포함_ /book2.png
        - 2) 네트워크 프로토콜: URL통해 알게된 웹의 자원위치에 접근하는 방식
            - HTTP: 웹에서 주로사용하는 네트워크 프로토콜
                - 구조: Header(정보교환) + Payload(|| body 실제 데이터 교환)
                    - Header: 웹에서 클라이언트(브라우저)-서버 사이에 필요한 정보교환
                    - Payload(Body): HTML, 이미지 등 실제 데이터 교환
        - 3) HTML: 브라우저를 통해 웹상의 콘텐츠를 나타내기위한 태그라는 명령어를 통해 웹의 목적에 맞는 기능 수행
            - 콘텐츠를 사용자에게 쉽게 나타내기 위함
            - <>에 둘러싸인 태그로 이루어진 언어
            - 마크업언어의 일종
            - !마크업언어: 태그를 사용하여 문서의 내용, 구조를 나타내는 언어
            - HTML로 작성된 웹 페이지가 HTTP기반 네트워크 통해 웹 서버에서 웹 브라우저로 전달, 웹 브라우저가 HTML 해석해 웹 페이지화면 만들어 사용자에게 제공
            - !JS: 클라이언트에서 로직을 실행가능
            - !CSS: 웹페이지 레이아웃 세부형태 정의
    3. 웹 성능이 중요한 이유
        - 웹 성능: 콘텐츠 신속전달되어 사용자가 원하는 서비스 빠르게 전달받을 수 있도록 하는 시스템들의 성능, 웹 로딩 시간을 뜻함
            - !웹 로딩 시간: 브라우저에 도메인주소 입력 후 사이트로 이동 & 웹 페이지 로딩되어 볼 수 있을 때 까지 걸린 시간
            - 서비스 사용자의 이탈률과 재접속 확률과 관계
            - 3초의 법칙
                - 웹 사이트 로딩 빨라야 함
                - 웹 사이트 머리말 주목받을 수 있어야 함
                - 웹 페이지 글이 눈에 띄어야 함
                - 웹 페이지 내 사용자 행동이 필요한 부분 정확히 전달
    4. 웹 성능 측정 방법
        - 웹 성능에 영향을 주는 요소
            1. 사용자 환경: 거주지역, 네트워크 장비(4G, 5G, Wi-fi...), 브라우저
            2. 전달 환경: 웹 서버가 위치한 데이터 센터의 전용선 보유 여부. 유선망과 모바일망에 각각 서버 배포한지 여부
            3. 공급자 환경: DNS 네임 서버 응답 속도, 웹 서버 응답 속도, 웹 사이트의 백엔드 처리 속도, 프론트엔드 최적화 여부
        - 웹 성능 측정 도구
            1. 크롬브라우저 개발자 도구
            2. WebPageTest 서비스: 세계 여러위치에서 웹 사이트 로딩 속도 테스트
                - 기본옵션: URL, TestLocation, Browser
                - 추가옵션: Connection(네트워크종류), NumberOfTestsToRun(테스트횟수), RepeatView(여러번테스트시 결과화면결정), CaptureVideo(테스트시브라우저로딩화면 비디오캡쳐), KeepTestPrivate(테스트결과공개여부), Label(테스트구분이름)
                - 평가항목: A~F등급
                    - First Byte Time: 웹서버에서 받은 콘텐츠의 첫번째 바이트 도착시간
                    - Keep-Alive Enabled: TCp연결 재사용위한 Keep-Alive설정여부
                    - Compress Transfer: 스크립트파일 Content-Encoding압축여부
                    - Compress Image: 이미지 압축 최적화 여부
                    - Cache Static Content: 정적파일에 브라우저캐시 사용여부
                    - Effective Use Of CDN: CDN효과적 사용여부
            3. 구글 PageSpeed: 구글 웹 성능요소지표 바탕으로 웹 성능영역 검출
                - Mod_pagespeed: Apache, Nginx웹 서버에 추가가능한 오픈소스 모듈
                    - 웹서버에 연동해 CSS, JS, HTML, Image 등의 성능최적화
                    - 원본 콘텐츠 별도 가공없이 웹상에서 클라이언트에게 실시간 제공
                - PSI: 웹 사이트 성능 최적화 요소 평가 서비스
                    - FCP: 웹 페이지가 사용자에게 시각적 응답을 보인 시간 / 빠른 로딩과 관련
                    - DCL: HTML문서를 브라우저가 로딩, 해석한 시간 / 웹사이트에 머무르는 시간과 관련
                    - 최적화 상태에 대한 정보 & 개선방법 제공
    5. 웹 성능을 만드는 지표
        - <웹 사이트 최적화기법>(저자: 스티브 사우더스)
            1. 백엔드
                - Expires 헤더 추가
                - gzip으로 압축
                - 페이지 재전송(redirection) 회피
                - ETag 설정
                - 캐시 지원하는 AJAX 만들기
            2. 프론트엔드
                - HTTP요청 줄이기
                - 스타일 시트는 상단, 스크립트는 하단
                - CSS 표현식 회피
                - JS, CSS는 외부파일에 넣기
                - JS는 작게
                - 중복 스크립트 제거
            3. 네트워크
                - 콘텐츠 전송 네트워크(CDN) 이용
                - DNS 조회 줄이기
        - 사용자 환경 - 프론트엔드
            - 사용자가 브라우저를 사용해보는 화면 전체: 클라이언트 사이드
            - HTML(웹페이지 내용) / CSS(UI레이아웃) / JS(웹페이지 로직) / DB에서 조회한 값 / 이미지, 동영상 등...
            - 빠르고 보기 쉽게 콘텐츠 전달 목적
        - 공급자 환경 - 백엔드
            - 프런트엔드 콘텐츠 실제 생산, 저장해 네트워크 통해 전달
            - 백엔드 요소는 대부분 웹서버에 구성: 서버 사이드
            - Java JSP, ASP, PHP 등...(웹서버와 클라이언트 물리적 통신) / DB / 라우터(네트워크 트래픽 경로 설정, 사용할 서버 인스턴스 설정,,, 네트워크 관련 결정 및 작업) / 네트워크 스위치
            - 백엔드 최적화 작업: DB정규화 / SSD사용 / 사용않는 데이터 백업 후 삭제
            - 구글 애널리틱스: 웹 성능, 속도 관련 서비스
                - 페이지 재전송(Redirection) + 도메인 조회 + 서버 연결 + 서버 응답..
                => 소요시간 1초 미만 === 프런트엔드 및 기타에서 로딩 시간의 대부분 사용
        - 전달 환경 - 네트워크
            - 장소, 시간따라 속도 변화해 성능 측정 어렵
            - 성능제약 요소
                - 대역폭: 일정시간에 처리가능한 트래픽 양
                    - 사용자 대폭 증가 시 웹 콘텐츠 전달속도 감소...
                - 지연시간: 기술적이유로 사용자에게 콘텐츠 미전달, 지연되는 시간
                    - 인터넷상 여러 환경에 영향 받음
            - ISP: 인터넷 서비스 사업자
                - ISP 품질따라 대역폭, 지연시간 변화
            - 모바일: 일반 PC와 같은 환경에서 인터넷 활용가능하도록 PC환경과 동일한 모바일 전용브라우저 개발
                - ex) 핸드폰 브라우징 환경과 애플리케이션 개발에 사용한 XML, HDML
    6. 웹 성능과 프런트엔드
        - 프런트엔드
            - 데이터 표현 & 사용자 입력을 백엔드에 전달
            - 페이지 로딩시간의 대부분 차지
                - 사용자(브라우저)관점에서 원하는 콘텐츠를 받았는가가 웹 성능의 기준 -> 사용자 브라우저에서 웹 성능 측정
                - 웹 서버 콘텐츠 생산속도 < 사용자가 웹 서비스에서 콘텐츠가져와 렌더링하는 시간
        - 브라우저 렌더링: PageSpeed || 크롬브라우저 개발자도구 Lighthouse
            - FCP: 첫 번째 콘텐츠 표시까지의 시간
            - SI: 페이지에 콘텐츠 표시되는 시간
            - LCP: 가장 큰 콘텐츠 표시된 시간
            - TTI: 사용자-페이지간 상호작용 가능해진 시간
            - TBT: FCP, TTI 사이 모든 시간의 합
            - CLS: 표시 영역에 보이는 요소가 얼마나 이동하는지 대한 정보
    7. 웹 성능 예산: 웹 성능 수치화해 기업의 목표로 하는 방법 중 하나
        - 성능예산: 웹 성능에 영향미치는 요소들 제어하는 한곗값
            - ex) 웹 페이지 파일크기, 로딩시간, 이미지 파일 수,,,
        - 분류
            - 정량 기반 지표: 이미지, 스크립트, 폰트 등 웹 페이지 제작시 필요한 요소들의 한곗값
                - ex) 이미지파일 최대크기, 웹 폰트 파일 최대 수, JS스크립트 파일크기합,,,
            - 시간 기반 지표: 실제 발생하는 웹 성능 이벤트 값 측정해 사용자가 느끼는 웹 성능 목표치 설정
                - 웹 성능 이벤트 값: DOMContentLoaded, Load,,,
                - 정량 기반 지표 단점 보완
                - 대표적 지표
                    - FCP: DOM의 첫 번째 비트 표시 시점
                    - TTI: 페이지가 사용자 입력에 안정적 응답까지 걸리는 시간
            - 규칙 기반 지표: 성능 측정 도구통한 성능 점수이용한 최적화
                - WebPageTest의 성능 점수
                - 구글 Lighthouse의 성능 점수
                - 사내 자체적 테스트 케이스 & 자동화 테스트 시스템
                - 정량 기반 지표 & 시간 기반 지표 개선시 점수 향상
        - 성능 예산 활용
            - 경쟁사 & 비슷한 산업군의 웹사이트 참고
            - 성능예산 목표치 설정 ex) LTE 환경에서의 모바일 기기의 TTI는 5초 미만
            - 웹페이지의 잦은 콘텐츠 변화: 구글 Lighthouse의 측정값을 빌드의 CI단계 테스트 케이스로 이용