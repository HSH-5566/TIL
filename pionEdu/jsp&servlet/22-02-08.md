## 2022.02.08 spring

### MemberDao

```java
@Mapper
public interface MemberDao {
	public void saveMember(Member member);
}
```

### application

- `spring.aop.proxy-target-class=false`
  - 트랜잭션 작동안되는 err 발생시킴

### 오라클 페이징

- rownum페이징

### 에러처리

- @ControllerAdvice : 해당 어노테이션 이용 시 모든 클래스에서 해당 핸들러 사용가능
- ExceptionController

### url이동

- memberJoinFrom의 확인버튼
  - `location.href = "/member/board";`
- MemberController에서 매핑
  - `@RequestMapping("/member")`
  - `@RequestMapping("/board")`
  - `showBoard()`
    - `return "member/memberBoard";`
    - `member/memberBoard.jsp`로 이동

### saveMember

- member의 submit 버튼
- MemberController
  - signUpMember(MemberRequest req, Model model)
- MemberService
  - saveMember(MemberRequest req)
- MemberDao
  - saveMember(Member member)
    - SqlSession : 작성한 SQL문 실행(mapping파일.xml), 트랜잭션 관리
- MemberMapper.xml
  - `<insert id="saveMember" parameterType="Member">`
- MemberController
  - signUpMember
    - `model.addAttribute("member", member);`
    - `return "member/memberJoinFrom";` : 해당 jsp로 이동
- memberJoinFrom.jsp
  - `MemberResponse mb = (MemberResponse)request.getAttribute("member");`
  - 해당 멤버 정보 표시

### findAllMember

- memberJoinFrom.jsp의 확인버튼
  - `location.href = "/member/board";`
- MemberController
  - showBoard()
- memberBoard
  - `url:'/member/list'`
- MemberController
  - getAllMember()
    - `memberService.findAllMember();`
- MemberService
  - findAllMember()
    - ```java
      memberDao.findAllMember()
      	.stream()
      	.map(MemberResponse::of)
      	.collect(Collectors.toList());
      ```
- MemberDao
  - findMember()
- MemberMapper.xml
  ```xml
  <select id="findAllMember" resultType="Member">
  SELECT * FROM member
  </select>
  ```
  - id, resultType 필요

## Why?

- MemberController의 signupMember 파라미터 Model
  - `model.addAttribute("member", member);`
  - memberJoinFrom.jsp
    - `MemberResponse mb = (MemberResponse)request.getAttribute("member");` 위함
- Dao는 항상 mapper뒤지나? 그래서 이게되나?

  ```java
  @Mapper
  public interface MemberDao {

    public void saveMember(Member member);

    public List<Member> findAllMember();
  }
  ```

> 과제

- requestbody 기본생성자
  - https://klyhyeon.tistory.com/250
